# lo - List Oneline

## 概要

カレントディレクトリの `.md`, `.txt`, `.mkd` ファイルを一覧表示し、各ファイルの1行目をテーブル形式で表示するCLIツール。

## 技術選定

### 言語: Go

- シングルバイナリでクロスプラットフォーム配布可能
- 高速な起動時間
- 標準ライブラリでファイル操作が容易

### TUIフレームワーク: charmbracelet/lipgloss

**選定理由:**

| 候補 | 評価 | 理由 |
|------|------|------|
| lipgloss/table | ◎ 採用 | 軽量、テーブル特化、Unicode幅対応 |
| bubbletea + bubbles | △ | インタラクティブ向け、今回は過剰 |
| tview | △ | 高機能だが依存が重い |
| pterm | × | 多機能すぎて過剰 |

**lipgloss/tableの利点:**

1. **Unicode幅の正確な計算** - 内部でgo-runewidthを使用し、マルチバイト文字の表示幅を正しく処理
2. **最小限の依存** - スタイリングとテーブル表示のみに特化
3. **シンプルなAPI** - メソッドチェーンで直感的に記述可能
4. **罫線カスタマイズ** - Nerd Font対応の罫線文字を指定可能

## 実装方式

### 処理フロー

```
1. カレントディレクトリを走査
2. 対象拡張子(.md, .txt, .mkd)をフィルタ
3. 各ファイルの1行目を読み取り
4. lipgloss/tableでテーブル構築
5. 標準出力に描画
```

### ファイル構成

```
lo/
├── ARCHTECTURE.md  # 本ドキュメント
├── go.mod
├── go.sum
└── main.go         # エントリポイント（単一ファイル構成）
```

### 単一ファイル構成の理由

- 機能が単純でモジュール分割の必要なし
- KISS原則に従い最小構成を維持
- 将来拡張時に分割可能

## アーキテクチャ

### 依存関係

```
lo (main.go)
└── github.com/charmbracelet/lipgloss
    └── github.com/charmbracelet/lipgloss/table
        └── github.com/mattn/go-runewidth (Unicode幅計算)
```

### エラーハンドリング方針

- ファイル読み取りエラー: 1行目を空文字として表示（サイレント継続）
- ディレクトリ読み取りエラー: エラーメッセージを出力して終了

### 拡張ポイント

現時点では実装しないが、将来の拡張候補:

- 対象拡張子のカスタマイズ（フラグ）
- 出力フォーマット選択（JSON, CSV）
- 再帰的ディレクトリ走査
